{% extends "base.html" %}
{% load static %}
{% block title %}Edit Profile â€” Crafty{% endblock %}

{% block content %}
<section class="container" style="max-width:800px;">
  <h1>Edit your profile</h1>

  {% if messages %}
    <ul class="messages">
      {% for message in messages %}
        <li class="{{ message.tags }}">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <div style="display:flex; gap:24px; align-items:flex-start;">
    <div style="width:160px;">
      {% comment %} show profile image if you have one on a user profile model; fallback to demo image {% endcomment %}
      {% if user_obj.profile_image_url %}
        <img src="{{ user_obj.profile_image_url }}" alt="{{ user_obj.get_full_name|default:user_obj.username }}" style="width:160px;height:160px;object-fit:cover;border-radius:8px;">
      {% else %}
        <img src="{% static "images/placeholder.jpg" %}" alt="avatar" style="width:160px;height:160px;object-fit:cover;border-radius:8px;">
      {% endif %}
    </div>

    <div style="flex:1;">
      <form method="post" novalidate>
        {% csrf_token %}
        <div>
          {{ form.non_field_errors }}
        </div>

        <div class="form-grid">
          <label for="{{ form.username.id_for_label }}">Username</label>
          {{ form.username }}
          {% if form.username.errors %}<div class="field-errors">{{ form.username.errors }}</div>{% endif %}

          <label for="{{ form.first_name.id_for_label }}">First name</label>
          {{ form.first_name }}
          {% if form.first_name.errors %}<div class="field-errors">{{ form.first_name.errors }}</div>{% endif %}

          <label for="{{ form.last_name.id_for_label }}">Last name</label>
          {{ form.last_name }}
          {% if form.last_name.errors %}<div class="field-errors">{{ form.last_name.errors }}</div>{% endif %}

          <label for="{{ form.email.id_for_label }}">Email</label>
          {{ form.email }}
          {% if form.email.errors %}<div class="field-errors">{{ form.email.errors }}</div>{% endif %}
        </div>

        <div style="margin-top:16px;">
          <button type="submit" class="btn btn-primary">Save changes</button>
          <a href="{% url 'profile' %}" class="btn btn-outline">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</section>

{% endblock %}
