{% extends "base.html" %}
{% load static %}
{% block title %}{{ product.title }} Â· Crafty{% endblock %}

{% block content %}
    <section class="container product-detail-container">
        <article class="product-detail-layout">
            
            <div class="product-gallery-area">
                <div class="gallery">
                    {% for img in images %}
                        <img src="{{ img.image.url }}" alt="{{ img.alt_text|default:product.title }}" class="main-product-image">
                    {% empty %}
                        <img src="{% static 'images/product_placeholder.jpg' %}" alt="{{ img.alt_text|default:product.title }}" class="main-product-image">
                    {% endfor %}
                </div>
                {% if images|length > 1 %}
                    <div class="thumbnail-strip">
                        </div>
                {% endif %}
            </div>

            <div class="product-info-area">
                
                <h1 class="product-title">{{ product.title }}</h1>
                
                <p class="product-price-large">â‚¹{{ product.price }}</p>

                <hr class="separator" />

                <form id="add-to-cart-form" class="add-to-cart-form" method="post" action="{% url 'add_to_cart' product.pk %}">
                    {% csrf_token %}
                    <div class="form-qty-group">
                        <label for="cart-qty" class="qty-label">Quantity:</label>
                        
                        <div class="qty-control">
                            <button type="button" class="qty-btn qty-minus" data-action="minus" aria-label="Decrease quantity">âˆ’</button>
                            
                            <input type="number" name="qty" id="cart-qty" value="1" min="1" class="qty-input-large">
                            
                            <button type="button" class="qty-btn qty-plus" data-action="plus" aria-label="Increase quantity">+</button>
                        </div>
                    </div>
                    
                    <button type="submit" id="add-to-cart-btn" class="btn btn-primary btn-full-width">
                        Add to Cart
                    </button>
                </form>

                <hr class="separator" />

                <div class="description">
                    <h2>Product Details</h2>
                    <div class="product-description-text">
                        {{ product.description|linebreaks }}
                    </div>
                </div>

                <aside class="seller-info-card">
                    <h2>Crafted By</h2>
                    {% if seller_profile %}
                        <div class="seller-details-flex">
                            {% if seller_profile.image %}
                                <img src="{{ seller_profile.image.url }}" alt="{{ seller_profile.display_name }}'s profile" class="seller-avatar" />
                            {% else %}
                                <div class="seller-avatar-placeholder">ðŸ‘¤</div>
                            {% endif %}
                            <div class="seller-text">
                                <p class="seller-name"><strong>{{ seller_profile.display_name }}</strong></p>
                                <p class="seller-location">{{ seller_profile.city }}</p>
                                <p class="seller-contact">Contact: {{ seller_profile.contact_number }}</p>
                            </div>
                        </div>
                    {% else %}
                        <p class="text-muted">Seller information not available.</p>
                    {% endif %}
                </aside>
            </div>
        </article>
    </section>


{% endblock %}