{% extends "base.html" %}
{% load static %}
{% block title %}Your Products · Crafty{% endblock %}

{% block content %}
    <section class="container seller-products-page">
        <header class="page-header">
            <h1>Your Products Inventory</h1>
            <a href="{% url 'product_create' %}" class="btn btn-primary add-product-btn">
                ➕ Add New Product
            </a>
        </header>
        
        <p class="section-description">Manage your listings, edit details, and remove sold-out items here.</p>

        {% if products %}
            <div class="product-management-grid">
                {% for p in products %}
                    <article class="product-management-card">
                        <a href="{% url 'product_edit' p.pk %}" class="card-image-link">
                            {% if p.images.first %}
                                <img src="{{ p.images.first.image.url }}" alt="{{ p.title }}" class="product-thumb">
                            {% else %}
                                <div class="product-thumb-placeholder">No Image</div>
                            {% endif %}
                        </a>

                        <div class="card-details">
                            <h3 class="product-title"><a href="{{ p.get_absolute_url }}">{{ p.title }}</a></h3>
                            
                            <div class="product-info-line">
                                <span class="price-tag">Price:</span>
                                <span class="price-value">{{ p.get_price_display }}</span>
                            </div>
                        </div>

                        <div class="card-actions">
                            <a href="{% url 'product_edit' p.pk %}" class="btn btn-outline btn-edit">
                                Edit Details
                            </a>
                            
                            <form method="post" action="{% url 'product_delete' p.pk %}" class="delete-form">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-error btn-delete" onclick="return confirm('Are you sure you want to delete this product: {{ p.title }}? This action cannot be undone.');">
                                    Delete
                                </button>
                            </form>
                        </div>
                    </article>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <p>You haven't listed any products yet. Time to get started!</p>
                <a href="{% url 'product_create' %}" class="btn btn-primary">List Your First Product</a>
            </div>
        {% endif %}
    </section>
{% endblock %}